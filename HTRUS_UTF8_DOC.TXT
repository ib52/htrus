┌─┬─┬─┬──────────────────────────────────────────────────────────────────┬─┬─┬─┐
│▒│▒│▒│                      Новый русификатор !!!                       │▒│▒│▒│
└─┴─┴─┴──────────────────────────────────────────────────────────────────┴─┴─┴─┘
                              ┌───────────────┐
                              │ Version  4.02 │
                              └───────┬───────┘
                     ┌────────────────┴─────────────────┐
                     │     Bug Fix & Global Upgrade     │
                     │           Beta testing.          │
                     └──────────────────────────────────┘
┌────────────────────────────────────────────────────┐
│  Необходимое аппаратное и программное обеспечение  │
└────────────────────────────────────────────────────┘
   1. Компьютер IBM AT 286+ или совместимый (ИВМ РС АТ).
   2. EGA, лучше VGA, совсем хорошо SVGA видеосистема.
   3. Наличие расширенной (XMS) памяти.
   4. Операционная система MS-DOS 5.0+ или совместимая.
   5. Драйвер (XMS) памяти. Например HIMEM.SYS или совместимый.

┌───────────────┐
│  Возможности  │
└───────────────┘
      1. Поддержка национального алфавита на клавиатуре.
         До двух наборов символов. Редактирование раскладки
         клавиатуры.
      2. Поддержка национального алфавита на дисплее во всех
         текстовых режимах EGA, VGA, SVGA (любой).
         HMA версией резидента (по умолчанию) поддерживаются
         также и шрифты 8x8, 8x14, 8x16 во всех графических
         видеорежимах EGA, VGA, SVGA (любой).
      3. Поддержка VESA интеpфейса.
      4. Возможность загрузки резидента в HMA память
         (устанавливается по умолчанию). Необходимо 10608 свободных
         байт в HMA памяти. Если памяти не хватает попробуйте
         уменьшить параметр BUFFERS=x в CONFIG.SYS. Узнать размер
         свободной HMA памяти можно при помощи программы HMAFREE.
      5. Возможность хранения шрифтов в XMS памяти. Необходимо 6Kb
         XMS памяти и 1Kb обычной памяти. Данной версией резидента
         не поддерживаются шрифты в графических режимах из за
         недоступности шрифтов в реальном режиме микропроцессора.
      6. Совместимость с MS-WINDOWS, RAMDRIVE, SMARTDRV, HYPERDISK.
         (Если ипользуете XMS то оставте 6Kb свободными).
      7. Переключение RUS/LAT по любой настраиваемой клавише
         (по умолчанию Right <SHIFT>) пpи тpех методах.
         Настройка производится при помощи опции /K[E]xxx.
         Где xxx - десятичный код нажатия клавиши.
         Буква E не обязательна и может быть указана для обозначения
         расширенной клавиши (например Right <ALT>). Если вместо E
         указать B то переключение будет производится по обоим клавишам.

         Пример :
          HTRUS /K42    - переключение по Left <SHIFT>
          HTRUS /K29    - переключение по Left <CTRL>.
          HTRUS /KB29   - переключение по <CTRL> (любой).
          HTRUS /KE29   - переключение по Right <CTRL>.

         Кpоме того, существует поддеpжка pазличных методов
         пеpеключения. Режим выбиpается пpи помощи опции /Mx
         Где x - номеp метода:

           /M0  - Trigger Key Switching.
                  Этот метод выбиpается по умолчанию. В этом
                  pежиме пеpеключение пpоисходит по выбpанной
                  клавише пеpеключения. Пеpвое нажатие пpиводит
                  к пеpеключению на pусский, а втоpое обpатно
                  на латинский и т.д.

           /M1  - Trigger Key + Left <SHIFT>.
                  Этот метод аналогичен /M0, но дополнительно
                  нажатие Left <SHIFT> всегда пpиводит к пеpеключению
                  на латинский.

           /M2  - Duble Key Switching.
                  Пpи использовании этого метода нажатие клавиши
                  пеpеключения всегда пpиводит к пеpеключению на
                  pусский, а нажатие Left <SHIFT> всегда на латинский.

         Все клавиши пеpеключения могут использоваться и как клавиши
         модификатоpы. Напpимеp нажатие Left <SHIFT> + <F1> никогда
         не пpиводит к пеpеключению pежима RUS/LAT.
      8. Индикация текущего режима клавиатуры бордером экрана.
                   HTRUS /B(e),(r),(a),(ra)
          (e),(r),(a),(ra) - это десятичные числа 1-3 знака [0..255]
          определяющие номер DAC для бордера.
          (e)  - для режима LAT
          (r)  - для режима RUS
          (a)  - для режима ALT
          (ra) - для режима ALT с предыдущим режимом RUS.
         Можно указать от одного до четырех чисел. Если отсутствует
         число (ra) то оно принимается равным (a). Если не нравится
         этот режим то /B- отключит его, а /B+ вернет на место.
      9. Установка максимальной частоты автоповтора и минимальной
         задержки для клавиатуры. Крайне необходим для програмеров.
                   HTRUS /F
     10. Установка размера курсора.
                   HTRUS /Cx
         Указывается число в диапазоне 1-7, задающее размер
         курсора.
     11. Выгрузка резидента, использующего XMS. Опция /R
         Не рекомендуется выгружать программу стандартными
         средствами т.к. при этом теряются блоки XMS.
         Если резидент загружен в HMA то выгружать стандартными
         средствами мягко говоря нечего. Однако по причине отсутствия
         функции освобождения блоков памяти HMA для такого резидента
         опция /R выполняет функцию отключения. Разрешить использование
         драйвера можно командой
                   HTRUS
         Все претензии по отсутствию возможности освобождения HMA
         предъявляйте Биллу Гейтсу.

     12. При повторном запуске все параметры устанавливаются в
         резидентной части, что позволяет не выгружать программу из
         памяти для повторной установки и изменения параметров.

┌──────────────────────────────┐
│  Параметры командной строки  │
└──────────────────────────────┘
   /A[+/-]        - разрешить/запретить использование режима Alt.
                    (Переключение по правому <Alt>).
   /B[+/-,colors] - управление использованием бордера экрана.
   /Mx            - управление режимами переключения.
   /X             - использовать XMS память вместо HMA.
   /F:<file>      - загрузить шрифт из файла.
                    Используются шрифты 8x8, 8x14, 8x16.
                    Редактировать шрифты можно при помощи
                    программы EVAFONT.
   /K[E]xxx       - установить клавишу переключения.
   /R             - выгрузить из памяти.
   /Nx            - установить режим Num Lock:
                      0 - Off
                      1 - On
   /D             - восстановить в резидентной части шрифты и
                    раскладку клавиатуры по умолчанию.
   /K:<file>      - загрузить раскладку клавиатуры из файла.
                    Редактировать раскладку можно при помощи
                    программы KEYEDIT.
   /F             - установить максимальную частоту автоповтора
                    и минимальную задержку для клавиатуры.
   /I[+/-]        - Установить/отключить режим автоповтора для
                    клавиши Insert.
   /Cx            - Установка размера курсора.
                    Работает достаточно интересно :). Если при
                    использовании EGA и XMS версии программы пропадает
                    курсор то задайте курсор побольше.
   /Sx:...        - Для совсем недовольных, но сведущих в программизме.
                    Этот параметр позволяет наиболее гибко настраивать
                    клавиши переключения режимов клавиатуры.
                    Для управления драйвером клавиатуры предусмотрено
                    использование до трёх клавиш переключения режимов,
                    причём имеется возможность программирования функций
                    клавиш. Для хранения текущего режима имеется
                    переменная (назовём её R) в которой задействованны
                    два младших бита:

                       xxxxxxXX
                             └┴──  00 - Режим LAT.
                                   01 - Режим RUS.
                                   10 - Режим ALT.
                                   11 - Режим ALT.
                    Каждая клавиша переключения может производить
                    различные операции с этими двумя битами и
                    определённой константой.

                    Полный синтаксис параметра следующий:

                     /Sx:[N/E/B/D],scan_code,[M/X/O/A],YY - где

                     x - номер настраиваемой клавиши от 1 до 3.

             [N/E/B/D] - Обозначает тип клавиши:
                          N - Обычная (не расширенная).
                          E - Расширенная.
                          B - Любая (обычная или расширенная).
                          D - Запрещенная.
             scan_code - Скан код клавиши.
                              Подробнее см. описание параметра /K.
             [M/X/O/A] - Задают операцию между битами режима и константой,
                         выполняемую при нажатии этой клавиши:
                          M - MOV
                          O - OR
                          X - XOR
                          A - AND
             YY        - Два бита константы.
        На самом деле параметры /K /A /M являются макропараметрами,
     реализующимися при помощи указанного. По умолчанию клавиша
     переключения настроена как /S1, сброс в LAT по левому <SHIFT>
     как /S2, а переключение на /ALT как /S3.
        Хочу предупредить, что параметр с такими возможностями
     предоставляет очень широкие возможности по настройке управления,
     а следовательно и задание комбинаций, нарушаюших возможность
     переключения режимов вообще. Поэтому использовать этот параметр
     без понимания таких слов как MOV, OR, XOR, AND и т.д. не
     рекомендуется. Кроме того перед использованием этого параметра
     подумайте чего же Вы собственно говоря хотите, поскольку методы
     научного, ненаучного, а также гипер-покрученного тыка скорее
     всего приведут к необходимости перезагрузки.

     Пример:

       /S3:N,56,X,10 - задаёт переключение режима ALT по левой
                       клавише <ALT>.

┌───────────────────┐
│  Немного истории  │
└───────────────────┘

  Версия 3.07

    В этой версии исправлен наконец обнаруженный глюк, заключающийся
 в том, что первых 16 или 32 символа соответственно шрифтов 8x16 и 8x8
 никогда не перепрограммировались :). Кроме того усовершенствованна
 поддержка EGA адаптера - при включении 25-строчных режимов не пропадает
 курсор.

  Версия 3.08

    В этой версии исправлен глюк приводящий при работе с EGA к уменьшению
 числа строк на экране с 25 до 21. Усовершенствован механизм поддержки
 шрифтов. Теперь всегда происходит правильная подгрузка, приводящая к
 изменению числа строк (только если это требуется, чем кстати не может
 похвастаться ни один известный мне русификатор).

  Версия 4.00

    В этой версии исправлена куча глюков - уже не помню сколько, изменён
 алгоритм драйвера клавиатуры, добавлена возможность использования HMA,
 изменение раскладки клавиатуры, использование внешних шрифтов и
 многое многое другое.

  Версия 4.01

    Пофиксан баг, связанный с тем, что для погрузки отца Виндоуза
 необходимо иметь стратегию распределения памяти вроде нулевой, а
 не оптимальной. После установки резидента стратегия распределения
 памяти восстанавливается в предыдущее состояние.

  Версия 4.02

    Я за этой блохой гонялся уже не помню сколько. Выглядело это как
 нежелание ПЭВМ ;) вводить строчные символы, что обеспечивалось
 "западанием" статуса правого <SHIFT> в области BIOS. Полагая, что
 для установки цвета бордюра экрана необходим некоторый, однако не
 слишком продолжительный промежуток времени, я вызывал эту функцию
 BIOS прямо из прерывания от клавиатуры. Однако оказалось, что кнопки
 нажимать быстрее и некоторые скан-коды теряются. Как всегда пришлось
 пхать цвет бордюра прямо в порты, что оказалось намного быстрее,
 хотя я до сих пор не могу понять что можно делать столько времени ?
    Найден и исправлен глюк, приводивший к нежеланию загружать шрифт
 при переключении режима отладчиками и средами Borland.
    В этой версии добавлена возможность установки размера курсора.
 Мне конечно удалось через 1 час найти взаимосвязь между параметрами
 функции 01h Int 10h и тем, что она делает с курсором, однако должен
 отметить, что подобный алгоритм интепретации параметров
 НЕ соответствует документации и НЕ отличается ни умом,
 ни сообразительностью. Есть еще страшная функция, которая повидимому
 отключает сие странное преобразования параметров, однако при этом
 остальные программы начинают вытворять с курсором малоприятные
 манипуляции. Остается только сказать - какой BIOS купили, таким
 и пользуйтесь (и параметры соответственно задавайте).


         Планы на будущее -

 возможность замены текстовых режимов 25 строк на режимы по 30 строк
 на VGA. Подобную функцию выполняет резидент v30_drv.com, однако он
 не совсем уж корректно работает да и памяти многовато занимает.
 Создание 30 строк на VGA становится возможным не из за уменьшения
 размера знакоместа с 16 точек до 8, как это делалось при
 переключении 25/50(43) строк, а за счет переключения числа строк
 растра с 400 (используется во всех стандартных текстовых режимах)
 до 480, что и добавляет дополнительных 5 строк. Данный метод в
 отличии от метода уменьшения знакоместа не ухудшает качества
 отображения символов, а лишних пять строк в текстовом редакторе
 вовсе не излишни, особенно при мониторе с зерном 0.28. Кроме того,
 размер знакоместа менее 8x16 неприемлем для длительной работы и
 сильно утомляет глаза.



                      1 января 1996 г.      Igor Butenko.
                             (Hackers Technology)

P.S. С новым Вас, господа, 7CCh годом !

